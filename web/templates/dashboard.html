<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Network Monitor - Security Dashboard</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">

    <style>
        /* Loading overlay */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #1a1a1a;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.3s ease-out;
        }
        #loading-overlay.hide {
            opacity: 0;
            pointer-events: none;
        }
        .loading-spinner {
            text-align: center;
        }
        .spinner-border {
            width: 3rem;
            height: 3rem;
            border-width: 0.3rem;
        }
    </style>
</head>
<body class="bg-dark text-light">

    <!-- Loading Overlay -->
    <div id="loading-overlay">
        <div class="loading-spinner">
            <div class="spinner-border text-success" role="status"></div>
            <div class="text-light mt-3" id="loading-message">Loading Security Dashboard...</div>
            <div class="text-muted mt-2" style="font-size: 0.85rem;" id="loading-hint">
                Initializing components...
            </div>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-dark bg-black border-bottom border-secondary">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-shield-check text-success"></i>
                Network Monitor - Security Dashboard
            </span>
            <div class="d-flex align-items-center">
                <span class="badge bg-success me-3" id="connection-status">
                    <i class="bi bi-wifi"></i> Connected
                </span>
                <span class="text-muted" id="current-time"></span>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-3">

        <!-- System Stats Row -->
        <div class="row mb-4">
            <!-- Packets/sec Gauge -->
            <div class="col-md-3">
                <div class="card bg-secondary text-white h-100">
                    <div class="card-body text-center">
                        <h6 class="card-title"><i class="bi bi-activity"></i> Packets/sec</h6>
                        <canvas id="packetsGauge" height="150"></canvas>
                        <h3 class="mt-2" id="packets-value">0</h3>
                    </div>
                </div>
            </div>

            <!-- Alerts/min Gauge -->
            <div class="col-md-3">
                <div class="card bg-secondary text-white h-100">
                    <div class="card-body text-center">
                        <h6 class="card-title"><i class="bi bi-exclamation-triangle"></i> Alerts/min</h6>
                        <canvas id="alertsGauge" height="150"></canvas>
                        <h3 class="mt-2" id="alerts-value">0</h3>
                    </div>
                </div>
            </div>

            <!-- CPU Usage -->
            <div class="col-md-3">
                <div class="card bg-secondary text-white h-100">
                    <div class="card-body text-center">
                        <h6 class="card-title"><i class="bi bi-cpu"></i> CPU Usage</h6>
                        <canvas id="cpuGauge" height="150"></canvas>
                        <h3 class="mt-2" id="cpu-value">0%</h3>
                    </div>
                </div>
            </div>

            <!-- Memory Usage -->
            <div class="col-md-3">
                <div class="card bg-secondary text-white h-100">
                    <div class="card-body text-center">
                        <h6 class="card-title"><i class="bi bi-memory"></i> Memory Usage</h6>
                        <canvas id="memoryGauge" height="150"></canvas>
                        <h3 class="mt-2" id="memory-value">0%</h3>
                    </div>
                </div>
            </div>
        </div>

        <!-- Remote Sensors Row -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card bg-secondary">
                    <div class="card-header d-flex justify-content-between align-items-center" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#sensorsCollapse">
                        <h5 class="mb-0">
                            <i class="bi bi-broadcast"></i> Remote Sensors
                            <span class="badge bg-info ms-2" id="sensors-count">0</span>
                            <span class="badge bg-success ms-1" id="sensors-online">0</span>
                        </h5>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="collapse show" id="sensorsCollapse">
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-dark table-sm table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th>Status</th>
                                            <th>Sensor</th>
                                            <th>Location</th>
                                            <th>CPU</th>
                                            <th>RAM</th>
                                            <th>Bandwidth</th>
                                            <th>Packets</th>
                                            <th>Alerts (24h)</th>
                                            <th>Last Seen</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sensors-table">
                                        <tr>
                                            <td colspan="10" class="text-center text-muted">Loading sensors...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sensor Command Center Row -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card bg-secondary">
                    <div class="card-header d-flex justify-content-between align-items-center" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#commandsCollapse">
                        <h5 class="mb-0">
                            <i class="bi bi-terminal"></i> Sensor Command Center
                        </h5>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="collapse" id="commandsCollapse">
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label for="command-sensor-select" class="form-label">Select Sensor</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="command-sensor-select">
                                        <option value="">-- Select Sensor --</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="command-type-select" class="form-label">Command</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="command-type-select">
                                        <option value="">-- Select Command --</option>
                                        <option value="get_status">Get Status</option>
                                        <option value="flush_buffer">Flush Alert Buffer</option>
                                        <option value="change_interval">Change Batch Interval</option>
                                        <option value="restart">Restart Sensor</option>
                                    </select>
                                </div>
                                <div class="col-md-4" id="command-params-container" style="display: none;">
                                    <label for="command-params" class="form-label">Parameters (JSON)</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="command-params" placeholder='{"interval": 60}'>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-12">
                                    <button class="btn btn-primary" id="send-command-btn">
                                        <i class="bi bi-send"></i> Send Command
                                    </button>
                                    <button class="btn btn-secondary ms-2" id="command-history-btn">
                                        <i class="bi bi-clock-history"></i> View History
                                    </button>
                                </div>
                            </div>
                            <div id="command-result" class="mt-3" style="display: none;">
                                <div class="alert" role="alert"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- IP Whitelist Management Row -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card bg-secondary">
                    <div class="card-header d-flex justify-content-between align-items-center" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#whitelistCollapse">
                        <h5 class="mb-0">
                            <i class="bi bi-shield-check"></i> IP Whitelist Management
                            <span class="badge bg-info ms-2" id="whitelist-count">0</span>
                        </h5>
                        <i class="bi bi-chevron-down"></i>
                    </div>
                    <div class="collapse" id="whitelistCollapse">
                        <div class="card-body">
                            <!-- Add Whitelist Form -->
                            <div class="row g-3 mb-3">
                                <div class="col-md-3">
                                    <label for="whitelist-ip" class="form-label">IP / CIDR</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="whitelist-ip" placeholder="192.168.1.0/24">
                                </div>
                                <div class="col-md-3">
                                    <label for="whitelist-description" class="form-label">Description</label>
                                    <input type="text" class="form-control bg-dark text-light border-secondary" id="whitelist-description" placeholder="Internal network">
                                </div>
                                <div class="col-md-2">
                                    <label for="whitelist-scope" class="form-label">Scope</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="whitelist-scope">
                                        <option value="global">Global</option>
                                        <option value="sensor">Sensor-Specific</option>
                                    </select>
                                </div>
                                <div class="col-md-2" id="whitelist-sensor-container" style="display: none;">
                                    <label for="whitelist-sensor-select" class="form-label">Sensor</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="whitelist-sensor-select">
                                        <option value="">-- Select Sensor --</option>
                                    </select>
                                </div>
                                <div class="col-md-2 d-flex align-items-end">
                                    <button class="btn btn-success w-100" id="add-whitelist-btn">
                                        <i class="bi bi-plus-circle"></i> Add
                                    </button>
                                </div>
                            </div>
                            <!-- Whitelist Table -->
                            <div class="table-responsive">
                                <table class="table table-dark table-sm table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th>IP / CIDR</th>
                                            <th>Description</th>
                                            <th>Scope</th>
                                            <th>Sensor</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="whitelist-table">
                                        <tr>
                                            <td colspan="6" class="text-center text-muted">Loading whitelist...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuration Management Row -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card bg-secondary">
                    <div class="card-header d-flex justify-content-between align-items-center" style="cursor: pointer;" data-bs-toggle="collapse" data-bs-target="#configCollapse">
                        <h5 class="mb-0">
                            <i class="bi bi-sliders"></i> Configuration Management
                            <span class="badge bg-info ms-2" id="config-params-count">0</span>
                        </h5>
                        <div class="d-flex align-items-center">
                            <button class="btn btn-sm btn-outline-warning me-2" id="reset-config-btn" title="Reset to best practice defaults">
                                <i class="bi bi-arrow-counterclockwise"></i> Reset to Defaults
                            </button>
                            <i class="bi bi-chevron-down"></i>
                        </div>
                    </div>
                    <div class="collapse" id="configCollapse">
                        <div class="card-body">
                            <!-- Sensor Scope Selector -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="config-scope-select" class="form-label">
                                        <i class="bi bi-funnel"></i> Configuration Scope
                                    </label>
                                    <select class="form-select bg-dark text-light border-secondary" id="config-scope-select">
                                        <option value="global">Global (All Sensors)</option>
                                        <option value="sensor">Sensor-Specific</option>
                                    </select>
                                </div>
                                <div class="col-md-4" id="config-sensor-container" style="display: none;">
                                    <label for="config-sensor-select" class="form-label">Select Sensor</label>
                                    <select class="form-select bg-dark text-light border-secondary" id="config-sensor-select">
                                        <option value="">-- Select Sensor --</option>
                                    </select>
                                </div>
                                <div class="col-md-4 d-flex align-items-end">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="config-show-defaults" checked>
                                        <label class="form-check-label" for="config-show-defaults">
                                            Show example values
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Category Tabs -->
                            <ul class="nav nav-tabs mb-3" id="configTabs" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="detection-rules-tab" data-bs-toggle="tab" data-bs-target="#detection-rules-pane" type="button" role="tab">
                                        <i class="bi bi-shield-check"></i> Detection Rules
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="thresholds-tab" data-bs-toggle="tab" data-bs-target="#thresholds-pane" type="button" role="tab">
                                        <i class="bi bi-speedometer"></i> Thresholds
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="alerts-config-tab" data-bs-toggle="tab" data-bs-target="#alerts-config-pane" type="button" role="tab">
                                        <i class="bi bi-bell"></i> Alert Management
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="performance-tab" data-bs-toggle="tab" data-bs-target="#performance-pane" type="button" role="tab">
                                        <i class="bi bi-lightning"></i> Performance
                                    </button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="all-params-tab" data-bs-toggle="tab" data-bs-target="#all-params-pane" type="button" role="tab">
                                        <i class="bi bi-list-ul"></i> All Parameters
                                    </button>
                                </li>
                            </ul>

                            <!-- Tab Content -->
                            <div class="tab-content" id="configTabContent">
                                <!-- Detection Rules Tab -->
                                <div class="tab-pane fade show active" id="detection-rules-pane" role="tabpanel">
                                    <div id="detection-rules-content" class="config-category-content">
                                        <div class="text-center text-muted p-4">
                                            <div class="spinner-border spinner-border-sm" role="status"></div>
                                            <p class="mt-2">Loading detection rules...</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Thresholds Tab -->
                                <div class="tab-pane fade" id="thresholds-pane" role="tabpanel">
                                    <div id="thresholds-content" class="config-category-content">
                                        <div class="text-center text-muted p-4">Loading thresholds...</div>
                                    </div>
                                </div>

                                <!-- Alert Management Tab -->
                                <div class="tab-pane fade" id="alerts-config-pane" role="tabpanel">
                                    <div id="alerts-config-content" class="config-category-content">
                                        <div class="text-center text-muted p-4">Loading alert settings...</div>
                                    </div>
                                </div>

                                <!-- Performance Tab -->
                                <div class="tab-pane fade" id="performance-pane" role="tabpanel">
                                    <div id="performance-content" class="config-category-content">
                                        <div class="text-center text-muted p-4">Loading performance settings...</div>
                                    </div>
                                </div>

                                <!-- All Parameters Tab -->
                                <div class="tab-pane fade" id="all-params-pane" role="tabpanel">
                                    <div id="all-params-content" class="config-category-content">
                                        <div class="text-center text-muted p-4">Loading all parameters...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Traffic Stats Row -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card bg-secondary h-100">
                    <div class="card-header">
                        <h5><i class="bi bi-graph-up"></i> Traffic Volume (24h)</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="trafficChart" height="200"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="card bg-secondary h-100">
                    <div class="card-header">
                        <h5><i class="bi bi-pie-chart"></i> Alert Distribution</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="alertPieChart" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Row -->
        <div class="row">
            <!-- Recent Alerts -->
            <div class="col-lg-6 col-md-12 mb-3">
                <div class="card bg-secondary h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5><i class="bi bi-bell"></i> Recent Alerts</h5>
                        <span class="badge bg-danger" id="alert-count">0</span>
                    </div>
                    <div class="card-body p-0">
                        <div class="alert-feed" id="alert-feed">
                            <div class="text-center text-muted p-4">
                                Loading alerts...
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Talkers -->
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card bg-secondary h-100">
                    <div class="card-header">
                        <h5><i class="bi bi-people"></i> Top Talkers</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-dark table-sm table-hover mb-0">
                                <thead>
                                    <tr>
                                        <th>IP/Hostname</th>
                                        <th>Traffic</th>
                                        <th>Dir</th>
                                    </tr>
                                </thead>
                                <tbody id="top-talkers-table">
                                    <tr>
                                        <td colspan="3" class="text-center text-muted">Loading...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Threat Types -->
            <div class="col-lg-3 col-md-6 mb-3">
                <div class="card bg-secondary h-100">
                    <div class="card-header">
                        <h5><i class="bi bi-bug"></i> Threat Types</h5>
                    </div>
                    <div class="card-body p-0">
                        <div class="list-group list-group-flush" id="threat-types-list">
                            <div class="list-group-item bg-dark text-muted text-center">
                                Loading...
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Alert Details Modal -->
    <div class="modal fade" id="alertDetailsModal" tabindex="-1" aria-labelledby="alertDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="alertDetailsModalLabel">
                        <i class="bi bi-info-circle"></i> Alert Details
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="alertDetailsBody">
                    <!-- Alert details will be populated here -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Threat Type Details Modal -->
    <div class="modal fade" id="threatDetailsModal" tabindex="-1" aria-labelledby="threatDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="threatDetailsModalLabel">
                        <i class="bi bi-bug-fill"></i> Threat Details
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="threatDetailsBody">
                    <!-- Loading indicator -->
                    <div id="threatDetailsLoading" class="text-center p-4">
                        <div class="spinner-border text-success" role="status"></div>
                        <div class="text-muted mt-2">Loading threat details...</div>
                    </div>
                    <!-- Threat details will be populated here -->
                    <div id="threatDetailsContent" style="display: none;">
                        <!-- Statistics Cards -->
                        <div class="row mb-4" id="threatStatsRow">
                            <!-- Statistics will be populated here -->
                        </div>

                        <!-- Tabs -->
                        <ul class="nav nav-tabs mb-3" id="threatDetailsTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-pane" type="button" role="tab">
                                    <i class="bi bi-grid"></i> Overview
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="sources-tab" data-bs-toggle="tab" data-bs-target="#sources-pane" type="button" role="tab">
                                    <i class="bi bi-hdd-network"></i> Source IPs
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="targets-tab" data-bs-toggle="tab" data-bs-target="#targets-pane" type="button" role="tab">
                                    <i class="bi bi-hdd-network-fill"></i> Targets
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="alerts-tab" data-bs-toggle="tab" data-bs-target="#alerts-pane" type="button" role="tab">
                                    <i class="bi bi-list-ul"></i> All Alerts
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="threatDetailsTabContent">
                            <!-- Overview Tab -->
                            <div class="tab-pane fade show active" id="overview-pane" role="tabpanel">
                                <div id="threatOverviewContent"></div>
                            </div>

                            <!-- Sources Tab -->
                            <div class="tab-pane fade" id="sources-pane" role="tabpanel">
                                <div class="table-responsive">
                                    <table class="table table-dark table-striped">
                                        <thead>
                                            <tr>
                                                <th>Source IP</th>
                                                <th>Hostname</th>
                                                <th>Country</th>
                                                <th>Count</th>
                                            </tr>
                                        </thead>
                                        <tbody id="threatSourcesTable"></tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Targets Tab -->
                            <div class="tab-pane fade" id="targets-pane" role="tabpanel">
                                <div class="table-responsive">
                                    <table class="table table-dark table-striped">
                                        <thead>
                                            <tr>
                                                <th>Target IP</th>
                                                <th>Hostname</th>
                                                <th>Country</th>
                                                <th>Count</th>
                                            </tr>
                                        </thead>
                                        <tbody id="threatTargetsTable"></tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- All Alerts Tab -->
                            <div class="tab-pane fade" id="alerts-pane" role="tabpanel">
                                <div id="threatAlertsContent"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Reset Config Confirmation Modal -->
    <div class="modal fade" id="resetConfigModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title">
                        <i class="bi bi-exclamation-triangle text-warning"></i>
                        Reset Configuration to Defaults
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="text-warning">
                        <i class="bi bi-exclamation-circle"></i>
                        <strong>Warning:</strong> This will reset all configuration parameters to best practice defaults.
                    </p>
                    <p>This action will:</p>
                    <ul>
                        <li>Reset detection rules to recommended settings</li>
                        <li>Update thresholds to best practice values</li>
                        <li>Configure alert management for optimal performance</li>
                        <li>Apply settings to: <strong id="reset-scope-display">Global (All Sensors)</strong></li>
                    </ul>
                    <p class="text-muted">
                        <i class="bi bi-info-circle"></i>
                        Sensors will automatically sync within 5 minutes. No restart required.
                    </p>
                    <div class="form-check mt-3">
                        <input class="form-check-input" type="checkbox" id="reset-confirm-checkbox">
                        <label class="form-check-label" for="reset-confirm-checkbox">
                            I understand that this will overwrite current settings
                        </label>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" id="confirm-reset-btn" disabled>
                        <i class="bi bi-arrow-counterclockwise"></i> Reset to Defaults
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- External Libraries - Load asynchronously for better performance -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>

    <!-- Custom JS - Load last with defer -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/config-management.js') }}" defer></script>

    <!-- Hide loading overlay when DOM is ready -->
    <script>
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loading-overlay').classList.add('hide');
            }, 300);
        });
    </script>

</body>
</html>
